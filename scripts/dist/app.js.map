{"version":3,"sources":["../lib/app.js"],"names":[],"mappings":"AAAA;;;AAEE,EAAE,MAAF,EAAU,EAAV,CAAa,QAAb,EAAuB,YAAM;AAC3B,QAAM,cAAN,GAD2B;AAE3B,MAAM,QAAQ,EAAE,oBAAF,EAAwB,GAAxB,EAAR;;;AAFqB,MAKrB,iBAAiB,IAAI,cAAJ,CAAmB,EAAnB,EAAuB,EAAE,MAAM,KAAN,EAAzB,CAAjB,CALqB;AAM3B,MAAM,eAAe,IAAI,QAAJ,CAAa,EAAE,YAAY,cAAZ,EAAf,CAAf,CANqB;CAAN,CAAvB;;;AAUF,SAAS,YAAT,CAAuB,UAAvB,EAAmC,QAAnC,EAA6C,OAA7C,EAAsD;AACpD,MAAM,OAAO,IAAI,QAAJ,EAAP,CAD8C;AAEpD,UAAQ,GAAR,0BAAmC,SAAS,YAAT,CAAnC,CAFoD;AAGpD,IAAE,SAAF,EAAa,IAAb,gDAHoD;CAAtD;;;AAOA,IAAI,WAAW,SAAS,IAAT,CAAc,MAAd,CAAqB;;AAElC,YAAU;AACR,WAAO,IAAP;AACA,cAAU,GAAV;AACA,gBAAY,2DAAZ;GAHF;AAKA,MAAG,OAAH;AACA,kCAAY,SAAS;AACnB,QAAI,OAAJ,EAAa,KAAK,MAAL,CAAY,QAAQ,UAAR,EAAoB,QAAQ,QAAR,EAAkB,QAAQ,KAAR,CAAlD,CAAb,KACK,KAAK,MAAL,CAAY,KAAK,QAAL,CAAc,UAAd,EAA0B,KAAK,QAAL,CAAc,QAAd,EAAwB,KAAK,QAAL,CAAc,KAAd,CAA9D,CADL;GATgC;AAYlC,0BAAQ,QAAQ,MAAM,OAAO;AAC3B,QAAM,SAAS,KAAK,GAAL,CADY;AAE3B,WAAO,QAAP,CAAgB,KAAhB,EAAuB,IAAvB,CAA4B,KAA5B,EAAmC,MAAnC,EAA2C,WAA3C,CAAuD,QAAvD,EAF2B;AAG3B,WAAO,QAAP,CAAgB,KAAhB,EAAuB,IAAvB,eAAwC,kBAAa,mBAArD,EAAuE,WAAvE,CAAmF,QAAnF,EAH2B;GAZK;CAArB,CAAX;;AAmBJ,IAAI,WAAW,SAAS,IAAT,CAAc,MAAd,CAAqB;;AAElC,WAAS,KAAT;AACA,aAAW,MAAX;AACA,0BAAQ,OAAO,QAAQ,OAAO;AAC5B,QAAM,OAAO,MAAM,UAAN,CAAiB,QAAjB,CADe;AAE5B,QAAM,QAAQ,OAAO,IAAP,CAAY,MAAM,UAAN,CAAiB,KAAjB,CAApB,CAFsB;AAG5B,QAAM,OAAO,MAAM,UAAN,CAAiB,WAAjB,CAA6B,MAA7B,GAAsC,CAAtC,GAA0C,MAAM,UAAN,CAAiB,WAAjB,GAA+B,EAAzE,CAHe;;AAK5B,QAAI,aAAJ,CAL4B;AAM5B,QAAI,IAAI,CAAJ,CANwB;AAO5B,UAAM,OAAN,CAAe,gBAAQ;AACrB,UAAI,IAAI,MAAM,MAAN,GAAe,CAAf,EAAkB;AACxB,oBAAe,MAAM,CAAN,QAAf,CADwB;OAA1B,MAEO,IAAI,IAAI,MAAM,MAAN,EAAc;AAC3B,yBAAe,MAAM,CAAN,CAAf,CAD2B;OAAtB;AAGP,UANqB;KAAR,CAAf,CAP4B;;AAgB5B,QAAI,cAAJ,CAhB4B;AAiB5B,QAAI,KAAK,MAAL,GAAc,CAAd,EAAkB;AACpB,yBAAiB,KAAK,OAAL,gBAAuB,KAAK,SAAL,6BAC3B,cAAS,iCACf,2BAFP,CADoB;KAAtB,MAKO;AACL,yBAAiB,KAAK,OAAL,gBAAuB,KAAK,SAAL,6BAC3B,cAAS,+BADtB,CADK;KALP;;AAWA,WAAO,MAAP,CAAe,SAAf,EA5B4B;GAJI;CAArB,CAAX;;AAoCJ,IAAI,WAAW,SAAS,IAAT,CAAc,MAAd,CAAqB;;AAElC,MAAG,SAAH;AACA,oCAAc;AACZ,SAAK,MAAL,GADY;GAHoB;AAMlC,4BAAU;;;AACR,SAAK,UAAL,CAAgB,KAAhB,CAAsB,EAAE,OAAO,YAAP,EAAxB,EAA+C,IAA/C,CAAqD,YAAM;;AAEzD,UAAG,MAAK,UAAL,CAAgB,MAAhB,KAA2B,CAA3B,EAA8B;AAC/B,cAAK,GAAL,CAAS,IAAT,iDAD+B;AAE/B,YAAM,OAAO,IAAI,QAAJ,EAAP,CAFyB;OAAjC,MAGO;;;AAEL,cAAM,QAAQ,MAAK,UAAL,CAAgB,EAAhB,CAAmB,CAAnB,CAAR;AACN,cAAM,QAAQ,MAAM,UAAN,CAAiB,KAAjB;AACd,cAAM,OAAO,IAAI,QAAJ,CAAc,EAAE,OAAO,MAAM,KAAN,EAAa,YAAY,MAAM,UAAN,EAAkB,UAAU,MAAM,QAAN,EAA5E,CAAP;;;AAGN,cAAI,IAAI,CAAJ;AACJ,gBAAK,GAAL,CAAS,KAAT;AACA,gBAAK,UAAL,CAAgB,OAAhB,CAAyB,gBAAQ;AAC/B,gBAAM,OAAO,IAAI,QAAJ,EAAP,CADyB;AAE/B,gBAAM,SAAS,MAAK,GAAL,CAFgB;AAG/B,iBAAK,MAAL,CAAY,IAAZ,EAAkB,MAAlB,EAA0B,CAA1B,EAH+B;AAI/B,gBAJ+B;WAAR,CAAzB;aATK;OAHP;KAFmD,CAArD,CADQ;GANwB;CAArB,CAAX;;AAiCJ,IAAI,YAAY,SAAS,KAAT,CAAe,MAAf,CAAsB;;CAAtB,CAAZ;;AAIJ,IAAI,iBAAiB,SAAS,UAAT,CAAoB,MAApB,CAA2B;;AAE9C,SAAO,SAAP;AACA,kCAAY,QAAQ,SAAS;AAC3B,SAAK,GAAL,qCAA2C,QAAQ,IAAR,WAA3C,CAD2B;GAHiB;CAA3B,CAAjB","file":"app.js","sourcesContent":["'use strict'\r\n  //jQuery and other events\r\n  $('form').on('submit', () => {\r\n    event.preventDefault();\r\n    const query = $('input[type=search]').val();\r\n\r\n    //call Backbone methods\r\n    const userCollection = new GistCollection([], { user: query });\r\n    const userGistList = new ListView({ collection: userCollection });\r\n  });\r\n\r\n//helpers and handlers\r\nfunction errorHandler (collection, response, options) {\r\n  const user = new UserView ();\r\n  console.log(`There was an error: ${response.responseText}`);\r\n  $('#output').html(`<h3>That user doesn't appear to exist</h3>`);\r\n};\r\n\r\n//backbone logic for interacting with GitHub API\r\nlet UserView = Backbone.View.extend({\r\n  //view logic for showing user information (profile pic, name, etc)\r\n  defaults: {\r\n    login: '??',\r\n    html_url: '#',\r\n    avatar_url: 'https://avatars1.githubusercontent.com/u/5244508?v=3&s=96'\r\n  },\r\n  el:'#user',\r\n  initialize (options) {\r\n    if (options) this.render(options.avatar_url, options.html_url, options.login);\r\n    else this.render(this.defaults.avatar_url, this.defaults.html_url, this.defaults.login);\r\n  },\r\n  render (avatar, link, login) {\r\n    const parent = this.$el;\r\n    parent.children('img').attr('src', avatar).removeClass('hidden');\r\n    parent.children('div').html(`<a href=\"${link}\"><h3>${login}</h3></a>`).removeClass('hidden');\r\n  }\r\n});\r\n\r\nlet GistView = Backbone.View.extend({\r\n  //view logic for individual gists\r\n  tagName: 'div',\r\n  className: 'gist',\r\n  render (model, target, count) {\r\n    const link = model.attributes.html_url;\r\n    const files = Object.keys(model.attributes.files);\r\n    const desc = model.attributes.description.length > 0 ? model.attributes.description : '';\r\n\r\n    let fileHtml = ``;\r\n    let i = 0;\r\n    files.forEach( file => {\r\n      if (i < files.length - 1) {\r\n        fileHtml += `${files[i]}, `;\r\n      } else if (i < files.length) {\r\n        fileHtml += `${files[i]}`;\r\n      }\r\n      i++;\r\n    });\r\n\r\n    let finalHtml = ``;\r\n    if (desc.length > 0 ) {\r\n      finalHtml += `<${this.tagName} class=\"${this.className}\">\r\n        <a href=\"${link}\">${fileHtml}</a>\r\n        <p>${desc}</p>\r\n      </div>`;\r\n    } else {\r\n      finalHtml += `<${this.tagName} class=\"${this.className}\">\r\n        <a href=\"${link}\">${fileHtml}</a>\r\n      </div>`;\r\n    }\r\n\r\n    target.append( finalHtml );\r\n  }\r\n});\r\n\r\nlet ListView = Backbone.View.extend({\r\n  //view logic for entire list of public gists\r\n  el:'#output',\r\n  initialize () {\r\n    this.render();\r\n  },\r\n  render () {\r\n    this.collection.fetch({ error: errorHandler }).then( () => {\r\n\r\n      if(this.collection.length === 0) {\r\n        this.$el.html(`<h3>Sorry, no gists found for that user</h3>`);\r\n        const user = new UserView ();\r\n      } else {\r\n        //render user\r\n        const first = this.collection.at(0);\r\n        const owner = first.attributes.owner;\r\n        const user = new UserView ({ login: owner.login, avatar_url: owner.avatar_url, html_url: owner.html_url });\r\n\r\n        //render gists\r\n        let i = 1;\r\n        this.$el.empty();\r\n        this.collection.forEach( item => {\r\n          const gist = new GistView ();\r\n          const target = this.$el;\r\n          gist.render(item, target, i);\r\n          i++;\r\n        });\r\n      }\r\n\r\n    });\r\n  }\r\n});\r\n\r\nlet GistModel = Backbone.Model.extend({\r\n  //model based on single public gist Object from GitHub API\r\n});\r\n\r\nlet GistCollection = Backbone.Collection.extend({\r\n  //collection of all gists pulled from GitHub API\r\n  model: GistModel,\r\n  initialize (models, options) {\r\n    this.url = `https://api.github.com/users/${options.user}/gists`;\r\n  }\r\n});\r\n\r\n// userCollection and userGistList built on form submission (see jQuery event handlers)\r\n"]}